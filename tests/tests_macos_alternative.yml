---
- name: Test macos
  hosts: localhost
  tasks:
    - name: check process
      shell: ps -ef | grep node || true
      register: out
      changed_when: false
      failed_when: false
    - debug: var=out.stdout_lines
    - name: check ports
      shell: netstat -anvp tcp | awk 'NR<3 || /LISTEN/'
      register: out
      changed_when: false
      failed_when: false
    - debug: var=out.stdout_lines
    - name: check if node_exporter is running on port 8080
      command: curl -sf http://localhost:8080
